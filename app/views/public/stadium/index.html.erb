
<main>
<div class="row">
   <div class="col s2 ">

      <ul class="collection with-header">
        <li class="collection-header"><h4>球場一覧</h4></li>
         <% @stadiums.each do |stadium|  %>
        <li class="collection-item"><%= link_to  stadium_path(stadium.id) do %><%=stadium.name %><% end %></li>
         <% end %>
      </ul>
    </div>










  <div class="col s10">
     <div id='map' data-posteds=<%= @posteds %>></div>



     <div class="col s4">
        <ul class="collapsible">
          <li>
              <div class="collapsible-header"><h5 class="blue-text text-darken-2">総合ランキング</h5></div>
              <% @sort_posts.each.with_index do |sort_post, i|  %>
               <% stadium_id = sort_post[0] %>
               <% average = sort_post[1].to_f %>
              <div class="collapsible-body"><span><%= Stadium.find(stadium_id).name %><%= "第#{ i+1 }位" %><%= average %></span></div>
          </li>
          <% end %>
        </ul>
   </div>


    <div class="col s4">
      <ul class="collapsible">
        <li>
          <div class="collapsible-header"><h5 class="green-text">グルメランキング</h5></div>
          <div class="collapsible-body"></div>
            <% @sort_posts.each.with_index do |sort_post, i|  %>
              <% stadium_id = sort_post[0] %>
              <% average = sort_post[1].to_f %>
              <div class="collection-body"><%= Stadium.find(stadium_id).name %><%= "第#{ i+1 }位" %><%= average %></div>
           <% end %>
        </li>
      </ul>
   </div>




    <div class="col s4">
      <ul class="collapsible">
        <li>
          <div class="collapsible-header"><h5 class="yellow-text">ムードランキング</h5></div>
          <div class="collapsible-body"></div>
            <% @sort_moods.each.with_index do |sort_post, i|  %>
              <% stadium_id = sort_post[0] %>
              <% average = sort_post[1].to_f %>
              <div class="collection-body"><%= Stadium.find(stadium_id).name %><%= "第#{ i+1 }位" %><%= average %></div>
           <% end %>
        </li>
      </ul>
   </div>



    <div class="col s4">
      <ul class="collapsible">
        <li>
          <div class="collapsible-header"><h5>アクセスランキング</h5></div>
          <div class="collapsible-body"></div>
            <% @sort_accesses.each.with_index do |sort_post, i|  %>
              <% stadium_id = sort_post[0] %>
              <% average = sort_post[1].to_f %>
              <div class="collection-body"><%= Stadium.find(stadium_id).name %><%= "第#{ i+1 }位" %><%= average %></div>
           <% end %>
        </li>
      </ul>
   </div>

<div class="col s4">
      <ul class="collapsible">
        <li>
          <div class="collapsible-header"><h5 class="red-text">観光ランキング</h5></div>
          <div class="collapsible-body"></div>
            <% @sort_sightseeings.each.with_index do |sort_post, i|  %>
              <% stadium_id = sort_post[0] %>
              <% average = sort_post[1].to_f %>
              <div class="collection-body"><%= Stadium.find(stadium_id).name %><%= "第#{ i+1 }位" %><%= average %></div>
           <% end %>
        </li>
      </ul>
   </div>

<div class="col s4">
      <ul class="collapsible">
        <li>
          <div class="collapsible-header"><h5 class="orange-text">キャパランキング</h5></div>
          <div class="collapsible-body"></div>
            <% @sort_capacities.each.with_index do |sort_post, i|  %>
              <% stadium_id = sort_post[0] %>
              <% average = sort_post[1].to_f %>
              <div class="collection-body"><%= Stadium.find(stadium_id).name %><%= "第#{ i+1 }位" %><%= average %></div>
           <% end %>
        </li>
      </ul>
   </div>







       
</div>
</div>
</div>

</main>





 <script type="text/javascript">
          function initMap() {
            var test = {lat: <%=  @posted.latitude %>, lng: <%=  @posted.longitude %>};
            var map = new google.maps.Map(document.getElementById('map'), {
              zoom: 15,
              center: test
            });

            var transitLayer = new google.maps.TransitLayer();
            transitLayer.setMap(map);

            var posteds = $('#map').data('posteds')
                // JSのeach文
            posteds.forEach(function(posted){
            //posteds.each do |posted|
              var hoge = {lat: posted.latitude, lng: posted.longitude};
              console.log(hoge)
              var contentString = '住所：' + posted.address;
              var infowindow = new google.maps.InfoWindow({
                content: contentString
              });

              var marker = new google.maps.Marker({
                position:hoge,
                map: map,
                title: contentString
              });

              marker.addListener('click', function() {
                infowindow.open(map, marker);
              });
            })

          }

        </script>
        <script async defer
          src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyDgRNuMMQ26SbHwrGQmhxfrS4kjcuygGbI&callback=initMap">
        </script>







